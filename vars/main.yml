---

karaf_service_link_name: "{{ karaf_service_name }}-service"

karaf_logging_properties:
  - { regexp: "^log4j.appender.out=.*$", line: "log4j.appender.out=uk.org.simonsite.log4j.appender.TimeAndSizeRollingAppender" }
  - { regexp: "^log4j.appender.out.layout=.*$", line: "log4j.appender.out.layout=org.apache.log4j.PatternLayout" }
  - { regexp: "^log4j.appender.out.layout.(.)onversionPattern.*$", line: "log4j.appender.out.layout.ConversionPattern=%d{ISO8601} | %-5.5p | %-16.16t | %-32.32c{1} | %X{bundle.id} - %X{bundle.name} - %X{bundle.version} | %m%n" }
  - { regexp: "^log4j.appender.out.file.*$", line: "log4j.appender.out.file=${karaf.data}/log/{{ karaf_service_name }}.log" }
  - { regexp: "^log4j.appender.out.append.*$", line: "log4j.appender.out.append=true" }
  - { regexp: "^log4j.appender.out.(.)atePattern.*$", line: "log4j.appender.out.DatePattern=.yyyy-MM-dd" }
  - { regexp: "^log4j.appender.out.(.)ateRollEnforced.*$", line: "log4j.appender.out.DateRollEnforced=true" }
  - { regexp: "^log4j.appender.out.(.)ompressionAlgorithm.*$", line: "log4j.appender.out.CompressionAlgorithm=GZ" }
  - { regexp: "^log4j.appender.out.(.)axRollFileCount.*$", line: "log4j.appender.out.MaxRollFileCount={{ karaf_log_file_roll_count }}" }
  - { regexp: "^log4j.appender.out.(.)axFileSize.*$", line: "log4j.appender.out.MaxFileSize={{ karaf_log_file_size }}" }
  - { regexp: "log4j.appender.out.(.)axBackupIndex=.*$", line: "#log4j.appender.out.MaxBackupIndex=" }

karaf_wrapper_conf1:
  - { regexp: "^#?set.default.JAVA_HOME.*$", line: "set.default.JAVA_HOME={{ karaf_java_home }}" }
  - { regexp: "^#?wrapper.java.initmemory.*$", line: "wrapper.java.initmemory={{ karaf_java_initial_memory }}" }
  - { regexp: "^#?wrapper.java.maxmemory.*$", line: "wrapper.java.maxmemory={{ karaf_java_max_memory }}" }

karaf_wrapper_conf2:
  - { regexp: "^#?wrapper.java.additional.7.*$", line: "wrapper.java.additional.8=-Djava.ext.dirs=%JAVA_HOME%/jre/lib/ext:%JAVA_HOME%/lib/ext:%KARAF_HOME%/lib/ext" }
  - { regexp: "^#?wrapper.java.additional.8.*$", line: "wrapper.java.additional.9=-Dfile.encoding=UTF-8" }
  - { regexp: "^#?wrapper.java.additional.9.*$", line: "wrapper.java.additional.10=-XX:MaxPermSize={{ karaf_java_max_perm_memory }}m" }
  - { regexp: "^#?wrapper.java.additional.10.*$", line: "wrapper.java.additional.11=-Djava.io.tmpdir=%KARAF_DATA%/tmp" }